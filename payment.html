<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment | KwickEat</title>
  <link rel="stylesheet" href="style.css">
  <script>
    // Load payment details
    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const shop = params.get("shop");
      const total = params.get("total");
      const wait = params.get("wait");

      document.getElementById("shopName").innerText = shop || "Unknown Shop";
      document.getElementById("amount").innerText = total ? `‚Çπ${total}` : "‚Çπ0.00";

      document.getElementById("shopHidden").value = shop;
      document.getElementById("totalHidden").value = total;
      document.getElementById("waitHidden").value = wait;
    };

    // Proceed only if UTR ID entered
function proceedToConfirmation() {
 const utrInput = document.getElementById("utrInput").value.trim();
 if (utrInput === "") {
 alert("‚ö†Ô∏è Please enter your UTR ID after completing payment!");
 return;
 }

 const shop = document.getElementById("shopHidden").value;
  const total = document.getElementById("totalHidden").value;
 const wait = document.getElementById("waitHidden").value;
 const queueNum = Math.floor(Math.random() * 100) + 1;
 const params = new URLSearchParams(window.location.search);
 const pin = params.get("pin");

 window.location.href = `order-confirmation.html?shop=${shop}&queue=${queueNum}&pin=${pin}&wait=${wait}&total=${total}`;
}


    
  </script>
</head>

<body class="shop-page">

  <!-- <script type="module">
  // Import Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getDatabase, ref, push, set, get, child } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

  // üîë Your Firebase Config (from Step 2)
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBQ1WF7SvcnuyQrO_KgEocP-nxn5Uw47bo",
  authDomain: "kwickeat.firebaseapp.com",
  databaseURL: "https://kwickeat-default-rtdb.firebaseio.com",
  projectId: "kwickeat",
  storageBucket: "kwickeat.firebasestorage.app",
  messagingSenderId: "850395651268",
  appId: "1:850395651268:web:41a52943ccd29b5aeb7d91",
  measurementId: "G-0EQ2416HPK"
};

  // üî• Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // üõí Example function to save order data
  function saveOrder(shop, items, total) {
    const orderRef = ref(db, "orders/");
    const newOrder = {
      shop: shop,
      items: items,
      total: total,
      pin: Math.floor(1000 + Math.random() * 9000),
      time: new Date().toLocaleString()
    };

    push(orderRef, newOrder)
      .then(() => alert("Order Saved Successfully in Firebase!"))
      .catch((error) => console.error("Error:", error));
  }

  // Example test call
  // saveOrder("Nescafe", "Cold Coffee x2", 80);
</script> -->

  <header>
    <h1 id="eat">Payment | <span id="shopName"></span></h1>
    <a href="/menu.html" class="back-btn">‚Üê Back</a>
  </header>

  <main class="menu-container">
    <div class="payment-box">
      <!-- Total Payment -->
      <p class="payment-amount">
        <strong>Total Payable:</strong> <span id="amount"></span>
      </p>

      <!-- QR Scanner Image -->
      <div class="qr-section">
        <img src="assets/QR.jpg" alt="QR Scanner" class="qr-img">

      </div>

      <!-- UTR ID Input -->
      <div class="utr-form">
        <label for="utrInput"><strong>Enter UTR ID:</strong></label><br>
        <input type="text" id="utrInput" placeholder="Enter your UTR ID here" required>
      </div>

      <!-- Hidden Inputs -->
      <input type="hidden" id="shopHidden">
      <input type="hidden" id="totalHidden">
      <input type="hidden" id="waitHidden">

      <!-- Place Order Button -->
      <button class="order-btn" onclick="proceedToConfirmation()">Place Order</button>
    </div>
  </main>
</body>
</html>
